function init(){event_id_global=0,global_day_selected=12,global_month_selected=2,global_year_selected=2022,Number.prototype.mod=function(e){return(this%e+e)%e},document.querySelector(".arrow_left").addEventListener("click",(function(){prevMonth()}),!1),document.querySelector(".arrow_right").addEventListener("click",(function(){nextMonth()}),!1),shiftNumbers()}function resetDays(){let e=document.querySelector(".days.list-unstyled");for(;e.children[0].classList.contains("outside");){e.removeChild(e.children[0]);var t=document.createElement("li");t.classList.add("outside");var n=document.createElement("div");n.classList.add("date"),n.textContent=31,t.appendChild(n),e.appendChild(t),day_shift_global--}day_shift_global=0}function shiftNumbers(){const e=new Date(year=global_year_selected,month=global_month_selected-1,date=0);day_shift_global=e.getDay();let t=day_shift_global;for(;0!=t;){var n=document.createElement("li");n.classList.add("outside");var l=document.createElement("div");l.classList.add("date"),l.textContent=31,n.appendChild(l);var a=document.querySelector(".days.list-unstyled");a.prepend(n),a.removeChild(a.children[a.children.length-1]),t--}}function getEvents(e,t){createEvent(4,13,"primary","test","test","test"),createEvent(5,17,"secondary","evenement","test","test"),updateEvent()}function nextMonth(){removeAllEvents(),removeDatesEventsListeners(),resetCalendarDates(),resetDays(),shiftNumbers(),selectedis(1,1+global_month_selected%12,global_year_selected+(12==global_month_selected?1:0)),getEvents()}function prevMonth(){removeAllEvents(),removeDatesEventsListeners(),resetCalendarDates(),resetDays(),shiftNumbers(),selectedis(1,1+(global_month_selected-2).mod(12),global_year_selected+(1==global_month_selected?-1:0)),getEvents()}function selectedis(e,t,n){document.querySelector(".days :nth-child("+e+")").children[0].classList.add("actual"),document.querySelector(".month").textContent=month_to_string(t)+" "+n,select_nb_days(numberofdays(t,n)),select_nb_days_prev_month(t,n),global_day_selected=e,global_month_selected=t,global_year_selected=n}function select_nb_days_prev_month(e,t){let n=1,l=numberofdays(1+(e-2).mod(12),t+(1==e?-1:0))-day_shift_global+1,a=l+day_shift_global-1;for(;l!=a+1;)grey_day_and_replace_real(n,l),n++,l++}function select_nb_days(e){let t=1;switch(e){case 28:grey_day_and_replace(29,t),t+=1;case 29:grey_day_and_replace(30,t),t+=1;case 30:grey_day_and_replace(31,t),t+=1}grey_day_and_replace(32,t),t+=1,grey_day_and_replace(33,t),t+=1,grey_day_and_replace(34,t),t+=1,grey_day_and_replace(35,t),t+=1,grey_day_and_replace(36,t),t+=1,grey_day_and_replace(37,t),t+=1,grey_day_and_replace(38,t),t+=1,grey_day_and_replace(39,t),t+=1,grey_day_and_replace(40,t),t+=1,grey_day_and_replace(41,t),t+=1,grey_day_and_replace(42,t)}function grey_day_and_replace(e,t){let n=document.querySelector(".days :nth-child("+(e+day_shift_global)+")");null!=n&&(n.classList.contains("outside")||n.classList.add("outside"),n.children[0].textContent=t)}function grey_day_and_replace_real(e,t){let n=document.querySelector(".days :nth-child("+e+")");null!=n&&(n.classList.contains("outside")||n.classList.add("outside"),n.children[0].textContent=t)}function ungrey_day_and_replace(e,t){let n=document.querySelector(".days :nth-child("+(e+day_shift_global)+")");null!=n&&(n.classList.contains("outside")&&n.classList.remove("outside"),n.children[0].textContent=t)}function month_to_string(e){switch(e){case 1:return"Janvier";case 2:return"Février";case 3:return"Mars";case 4:return"Avril";case 5:return"Mai";case 6:return"Juin";case 7:return"Juillet";case 8:return"Aout";case 9:return"Septembre";case 10:return"Octobre";case 11:return"Novembre";case 12:return"Décembre"}}function bisextile_jours(e){return e%4==0&&e%100!=0||e%400==0?29:28}function numberofdays(e,t){switch(e){case 1:case 3:case 5:case 7:case 8:case 10:case 12:return 31;case 2:return bisextile_jours(t);case 4:case 6:case 9:case 11:return 30}}function createEvent(e,t,n,l,a,s,r=null){let o=document.createElement("div");if(null!=r)for(let e=0;e<r.length;e++)o.classList.add(r[e]);Math.floor((t-1)/7)==Math.floor((e-1)/7)&&null==r||o.classList.add("event-link"),o.id="eventno-"+event_id_global,event_id_global+=1,o.classList.add("event"),"success"==n?o.classList.add("bg-success"):"warning"==n?o.classList.add("bg-warning"):"danger"==n?o.classList.add("bg-danger"):"info"==n?o.classList.add("bg-info"):"primary"==n?o.classList.add("bg-primary"):"secondary"==n&&o.classList.add("bg-secondary");let d=!0,c=!0;if(t-e!=0){Math.floor((t-1)/7)>Math.floor((e-1)/7)+1&&o.classList.add("eventno-"+(event_id_global+1)),Math.floor((t-1)/7)>Math.floor((e-1)/7)+2&&o.classList.add("eventno-"+(event_id_global+2)),Math.floor((t-1)/7)>Math.floor((e-1)/7)+3&&o.classList.add("eventno-"+(event_id_global+3)),Math.floor((t-1)/7)!=Math.floor((e-1)/7)&&(o.classList.add("eventno-"+event_id_global),frombis=7*Math.floor((e-1)/7)+8,null==r?(r=new Array).push("eventno-"+(event_id_global-1)):(c=!1,r.push("eventno-"+(event_id_global-1))),createEvent(frombis,t,n,l,a,s,r));let i=t;for(;Math.floor((i-1)/7)!=Math.floor((e-1)/7);)i=7*Math.floor((i-1)/7),d=!1;o.classList.add("span-"+(i-e+1))}o.textContent=l,d?c&&o.classList.add("end"):c?o.classList.add("begin"):o.classList.add("all-day"),document.querySelector(".days :nth-child("+e+")").append(o)}function updateEvent(){for(x=0,eventnoProposal=document.getElementById("eventno-"+x);null!=eventnoProposal;){let e=eventnoProposal.classList,t=-1;for(let n=0;n<e.length;n++)-1!=eventnoProposal.classList[n].search("span-[2-7]")&&(t=eventnoProposal.classList[n].substring(5));if(-1!=t){insertHere=eventnoProposal.parentElement.nextElementSibling;for(let e=1;e<t;e++){if(newChild=document.createElement("div"),newChild.textContent="hidden",e==t-1&&eventnoProposal.classList.contains("end")?newChild.classList.add("end"):newChild.classList.add("all-day"),newChild.classList.add("event-link"),newChild.classList.add("eventno-"+x),eventnoProposal.classList.contains("event-link")){let e=1;for(;eventnoProposal.classList.contains("eventno-"+(x+e));)newChild.classList.add("eventno-"+(x+e)),e+=1;for(e=1;eventnoProposal.classList.contains("eventno-"+(x-e));)newChild.classList.add("eventno-"+(x-e)),e+=1}1==insertHere.childElementCount?insertHere.append(newChild):insertHere.children[1].classList.contains("event")?insertHere.insertBefore(newChild,insertHere.children[1]):insertHere.append(newChild),insertHere=insertHere.nextElementSibling}}x+=1,eventnoProposal=document.getElementById("eventno-"+x)}const e=document.querySelectorAll(".event");for(let t=0;t<e.length;t++)e[t].addEventListener("mouseenter",a(e[t]),!1),e[t].addEventListener("mouseleave",s(e[t]),!1);const t=document.getElementsByClassName("event-link");for(let e=0;e<t.length;e++)t[e].addEventListener("mouseenter",n(t[e]),!1),t[e].addEventListener("mouseleave",l(t[e]),!1);function n(e){let t=e;return function(){let e=t.classList;for(let t=0;t<e.length;t++)"eventno-"==e[t].substring(0,8)&&document.getElementById(e[t]).classList.add("hover")}}function l(e){let t=e;return function(){let e=t.classList;for(let t=0;t<e.length;t++)"eventno-"==e[t].substring(0,8)&&document.getElementById(e[t]).classList.remove("hover")}}function a(e){let t=e;return function(){t.classList.add("hover")}}function s(e){let t=e;return function(){t.classList.remove("hover")}}const r=document.getElementsByClassName("date");for(let e=0;e<r.length;e++)r[e].addEventListener("click",OnClickDateEvent(r[e]),!1);const o=document.querySelectorAll(".event:not(.event-link)");for(let e=0;e<o.length;e++)o[e].addEventListener("click",c(o[e]),!1);const d=document.getElementsByClassName("event-link");for(let e=0;e<d.length;e++)d[e].addEventListener("click",c(d[e]),!1);function c(e){return function(){let e=document.querySelectorAll("li div.active");if(null!=e)for(let t=0;t<e.length;t++)e[t].classList.remove("active");let t=document.querySelectorAll("li div.hover");if(null!=t)for(let e=0;e<t.length;e++)t[e].classList.add("active")}}}function removeAllEvents(){event_id_global=0;let e=document.querySelectorAll(".event");for(let t=0;t<e.length;t++)e[t].parentNode.removeChild(e[t]);let t=document.querySelectorAll(".event-link");for(let e=0;e<t.length;e++)t[e].parentNode.removeChild(t[e])}function resetCalendarDates(e){let t=29;ungrey_day_and_replace(29,t),t+=1,ungrey_day_and_replace(30,t),t+=1,ungrey_day_and_replace(31,t),t=1,grey_day_and_replace(32,t),t+=1,grey_day_and_replace(33,t),t+=1,grey_day_and_replace(34,t),t+=1,grey_day_and_replace(35,t)}function OnClickDateEvent(e){let t=e;return function(){document.querySelector(".date.actual").classList.remove("actual"),t.classList.add("actual")}}function removeDatesEventsListeners(){let e=document.getElementsByClassName("date");for(let n=0;n<e.length;n++){var t=e[n].cloneNode(!0);e[n].parentNode.replaceChild(t,e[n])}}init(),getEvents(),selectedis(12,2,2022);